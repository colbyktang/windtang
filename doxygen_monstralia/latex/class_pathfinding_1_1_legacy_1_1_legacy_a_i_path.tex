\hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path}{}\doxysection{Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path Class Reference}
\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path}\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}


AI for following paths. This AI is the default movement script which comes with the A$\ast$ \mbox{\hyperlink{namespace_pathfinding}{Pathfinding}} Project. It is in no way required by the rest of the system, so feel free to write your own. But I hope this script will make it easier to set up movement for the characters in your game. This script is not written for high performance, so I do not recommend using it for large groups of units. ~\newline
~\newline
This script will try to follow a target transform, in regular intervals, the path to that target will be recalculated. It will on Fixed\+Update try to move towards the next point in the path. However it will only move in the forward direction, but it will rotate around it\textquotesingle{}s Y-\/axis to make it reach the target.  




Inheritance diagram for Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path\+:
% FIG 0


Collaboration diagram for Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path\+:
% FIG 1
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} = 1
\begin{DoxyCompactList}\small\item\em Target point is Interpolated on the current segment in the path so that it has a distance of \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} from the AI. See the detailed description of \mbox{\hyperlink{class_pathfinding_1_1_a_i_path}{A\+I\+Path}} for an illustrative image \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a7aeeafdf5825c74b972ff1be9cde53ea}{closest\+On\+Path\+Check}} = true
\begin{DoxyCompactList}\small\item\em Do a closest point on path check when receiving path callback. Usually the AI has moved a bit between requesting the path, and getting it back, and there is usually a small gap between the AI and the closest node. If this option is enabled, it will simulate, when the path callback is received, movement between the closest node and the current AI position. This helps to reduce the moments when the AI just get a new path back, and thinks it ought to move backwards to the start of the new path even though it really should just proceed forward. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a982a8254ca76560bfb8aa75a05a791da}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a982a8254ca76560bfb8aa75a05a791da}} 
override void {\bfseries Awake} ()
\item 
override void \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a0ff842a858296aa82eb4e3ae7cac6b17}{On\+Path\+Complete}} (\mbox{\hyperlink{class_pathfinding_1_1_path}{Path}} \+\_\+p)
\begin{DoxyCompactList}\small\item\em Called when a requested path has finished calculation. A path is first requested by \mbox{\hyperlink{class_pathfinding_1_1_a_i_base_a26afcddbffa25240e2a0919b34c186a3}{Search\+Path}}, it is then calculated, probably in the same or the next frame. Finally it is returned to the seeker which forwards it to this function.~\newline
\end{DoxyCompactList}\item 
override void \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ac0f1f3120d9db1a09ce34c75ee4865c1}{Update}} ()
\begin{DoxyCompactList}\small\item\em Called every frame. If no rigidbodies are used then all movement happens here. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a2b3d3f830b782ac508bc40941be00e49}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a2b3d3f830b782ac508bc40941be00e49}} 
float {\bfseries X\+Z\+Sqr\+Magnitude} (Vector3 a, Vector3 b)
\item 
new Vector3 \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ae7b2f72076ff318c342bcf6c62b95578}{Calculate\+Velocity}} (Vector3 current\+Position)
\begin{DoxyCompactList}\small\item\em Calculates desired velocity. Finds the target path segment and returns the forward direction, scaled with speed. A whole bunch of restrictions on the velocity is applied to make sure it doesn\textquotesingle{}t overshoot, does not look too far ahead, and slows down when close to the target. /see speed /see end\+Reached\+Distance /see slowdown\+Distance /see Calculate\+Target\+Point /see target\+Point /see target\+Direction /see current\+Waypoint\+Index \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab8ea6cc9491ac0635efbe56cb32e059b}{Rotate\+Towards}} (Vector3 dir)
\begin{DoxyCompactList}\small\item\em Rotates in the specified direction. Rotates around the Y-\/axis. See\+: turning\+Speed \end{DoxyCompactList}\item 
Vector3 \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab9203f33868e3034df71ca77dccad951}{Calculate\+Target\+Point}} (Vector3 p, Vector3 a, Vector3 b)
\begin{DoxyCompactList}\small\item\em Calculates target point from the current line segment. See\+: \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} T\+O\+DO\+: This function uses .magnitude quite a lot, can it be optimized? \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a0ed73c9caee5c8b22069cf3f533d7719}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a0ed73c9caee5c8b22069cf3f533d7719}} 
float {\bfseries min\+Move\+Scale} = 0.\+05F
\item 
int \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_abb7f79ba53bafef84571b0743810d9a2}{current\+Waypoint\+Index}} = 0
\begin{DoxyCompactList}\small\item\em Current index in the path which is current target \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ac959da487d4a506a5f2ef5e7b32f3145}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ac959da487d4a506a5f2ef5e7b32f3145}} 
Vector3 {\bfseries last\+Found\+Waypoint\+Position}
\item 
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a3a359c28256cf7d8882808ea8024c180}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a3a359c28256cf7d8882808ea8024c180}} 
float {\bfseries last\+Found\+Waypoint\+Time} = -\/9999
\item 
new Vector3 \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_acef40206cd82c494b7ef47641818077e}{target\+Direction}}
\begin{DoxyCompactList}\small\item\em Relative direction to where the AI is heading. Filled in by \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ae7b2f72076ff318c342bcf6c62b95578}{Calculate\+Velocity}} \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
AI for following paths. This AI is the default movement script which comes with the A$\ast$ \mbox{\hyperlink{namespace_pathfinding}{Pathfinding}} Project. It is in no way required by the rest of the system, so feel free to write your own. But I hope this script will make it easier to set up movement for the characters in your game. This script is not written for high performance, so I do not recommend using it for large groups of units. ~\newline
~\newline
This script will try to follow a target transform, in regular intervals, the path to that target will be recalculated. It will on Fixed\+Update try to move towards the next point in the path. However it will only move in the forward direction, but it will rotate around it\textquotesingle{}s Y-\/axis to make it reach the target. 

\hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_variables}{}\doxysubsection{Quick overview of the variables}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_variables}
In the inspector in Unity, you will see a bunch of variables. You can view detailed information further down, but here\textquotesingle{}s a quick overview.~\newline
The \mbox{\hyperlink{class_pathfinding_1_1_a_i_base_afa4d04fa3ca0dab9efd337f4137aaee1}{repath\+Rate}} determines how often it will search for new paths, if you have fast moving targets, you might want to set it to a lower value.~\newline
The \mbox{\hyperlink{class_pathfinding_1_1_a_i_base_a2d67040df4ed2689668298965202db93}{target}} variable is where the AI will try to move, it can be a point on the ground where the player has clicked in an R\+TS for example. Or it can be the player object in a zombie game.~\newline
The speed is self-\/explanatory, so is turning\+Speed, however \mbox{\hyperlink{class_pathfinding_1_1_a_i_path_a6e7ea1154c5523c0767aca0d8e1938b8}{slowdown\+Distance}} might require some explanation. It is the approximate distance from the target where the AI will start to slow down. Note that this doesn\textquotesingle{}t only affect the end point of the path but also any intermediate points, so be sure to set \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} and \mbox{\hyperlink{class_pathfinding_1_1_a_i_path_adabb6114c1087142079534f593bfae82}{pick\+Next\+Waypoint\+Dist}} to a higher value than this.~\newline
\mbox{\hyperlink{class_pathfinding_1_1_a_i_path_adabb6114c1087142079534f593bfae82}{pick\+Next\+Waypoint\+Dist}} is simply determines within what range it will switch to target the next waypoint in the path.~\newline
\mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} will try to calculate an interpolated target point on the current segment in the path so that it has a distance of \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} from the AI~\newline
Below is an image illustrating several variables as well as some internal ones, but which are relevant for understanding how it works. Note that the \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} range will not match up exactly with the target point practically, even though that\textquotesingle{}s the goal. \mbox{[}Open online documentation to see images\mbox{]} This script has many movement fallbacks. If it finds a Navmesh\+Controller, it will use that, otherwise it will look for a character controller, then for a rigidbody and if it hasn\textquotesingle{}t been able to find any it will use Transform.\+Translate which is guaranteed to always work.

Deprecated\+: Use the \mbox{\hyperlink{class_pathfinding_1_1_a_i_path}{A\+I\+Path}} class instead. This class only exists for compatibility reasons.

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab9203f33868e3034df71ca77dccad951}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab9203f33868e3034df71ca77dccad951}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!CalculateTargetPoint@{CalculateTargetPoint}}
\index{CalculateTargetPoint@{CalculateTargetPoint}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{CalculateTargetPoint()}{CalculateTargetPoint()}}
{\footnotesize\ttfamily Vector3 Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+Calculate\+Target\+Point (\begin{DoxyParamCaption}\item[{Vector3}]{p,  }\item[{Vector3}]{a,  }\item[{Vector3}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Calculates target point from the current line segment. See\+: \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} T\+O\+DO\+: This function uses .magnitude quite a lot, can it be optimized? 


\begin{DoxyParams}{Parameters}
{\em p} & Current position\\
\hline
{\em a} & Line segment start\\
\hline
{\em b} & Line segment end The returned point will lie somewhere on the line segment.\\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ae7b2f72076ff318c342bcf6c62b95578}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ae7b2f72076ff318c342bcf6c62b95578}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!CalculateVelocity@{CalculateVelocity}}
\index{CalculateVelocity@{CalculateVelocity}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{CalculateVelocity()}{CalculateVelocity()}}
{\footnotesize\ttfamily new Vector3 Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+Calculate\+Velocity (\begin{DoxyParamCaption}\item[{Vector3}]{current\+Position }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Calculates desired velocity. Finds the target path segment and returns the forward direction, scaled with speed. A whole bunch of restrictions on the velocity is applied to make sure it doesn\textquotesingle{}t overshoot, does not look too far ahead, and slows down when close to the target. /see speed /see end\+Reached\+Distance /see slowdown\+Distance /see Calculate\+Target\+Point /see target\+Point /see target\+Direction /see current\+Waypoint\+Index 

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a0ff842a858296aa82eb4e3ae7cac6b17}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a0ff842a858296aa82eb4e3ae7cac6b17}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!OnPathComplete@{OnPathComplete}}
\index{OnPathComplete@{OnPathComplete}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{OnPathComplete()}{OnPathComplete()}}
{\footnotesize\ttfamily override void Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+On\+Path\+Complete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_pathfinding_1_1_path}{Path}}}]{\+\_\+p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Called when a requested path has finished calculation. A path is first requested by \mbox{\hyperlink{class_pathfinding_1_1_a_i_base_a26afcddbffa25240e2a0919b34c186a3}{Search\+Path}}, it is then calculated, probably in the same or the next frame. Finally it is returned to the seeker which forwards it to this function.~\newline




Reimplemented from \mbox{\hyperlink{class_pathfinding_1_1_a_i_path_a7713dd3f6c48e79e7198158ce1a434aa}{Pathfinding.\+A\+I\+Path}}.

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab8ea6cc9491ac0635efbe56cb32e059b}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ab8ea6cc9491ac0635efbe56cb32e059b}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!RotateTowards@{RotateTowards}}
\index{RotateTowards@{RotateTowards}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{RotateTowards()}{RotateTowards()}}
{\footnotesize\ttfamily void Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+Rotate\+Towards (\begin{DoxyParamCaption}\item[{Vector3}]{dir }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Rotates in the specified direction. Rotates around the Y-\/axis. See\+: turning\+Speed 

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ac0f1f3120d9db1a09ce34c75ee4865c1}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ac0f1f3120d9db1a09ce34c75ee4865c1}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!Update@{Update}}
\index{Update@{Update}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{Update()}{Update()}}
{\footnotesize\ttfamily override void Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+Update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Called every frame. If no rigidbodies are used then all movement happens here. 



Reimplemented from \mbox{\hyperlink{class_pathfinding_1_1_a_i_base_a942fc9185cd8c810e9421c0b5ea2b510}{Pathfinding.\+A\+I\+Base}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a7aeeafdf5825c74b972ff1be9cde53ea}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a7aeeafdf5825c74b972ff1be9cde53ea}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!closestOnPathCheck@{closestOnPathCheck}}
\index{closestOnPathCheck@{closestOnPathCheck}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{closestOnPathCheck}{closestOnPathCheck}}
{\footnotesize\ttfamily bool Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+closest\+On\+Path\+Check = true}



Do a closest point on path check when receiving path callback. Usually the AI has moved a bit between requesting the path, and getting it back, and there is usually a small gap between the AI and the closest node. If this option is enabled, it will simulate, when the path callback is received, movement between the closest node and the current AI position. This helps to reduce the moments when the AI just get a new path back, and thinks it ought to move backwards to the start of the new path even though it really should just proceed forward. 

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_abb7f79ba53bafef84571b0743810d9a2}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_abb7f79ba53bafef84571b0743810d9a2}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!currentWaypointIndex@{currentWaypointIndex}}
\index{currentWaypointIndex@{currentWaypointIndex}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{currentWaypointIndex}{currentWaypointIndex}}
{\footnotesize\ttfamily int Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+current\+Waypoint\+Index = 0\hspace{0.3cm}{\ttfamily [protected]}}



Current index in the path which is current target 

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!forwardLook@{forwardLook}}
\index{forwardLook@{forwardLook}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{forwardLook}{forwardLook}}
{\footnotesize\ttfamily float Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+forward\+Look = 1}



Target point is Interpolated on the current segment in the path so that it has a distance of \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_a28d1a7c9d5f13110a7ae8b1bdeb6f064}{forward\+Look}} from the AI. See the detailed description of \mbox{\hyperlink{class_pathfinding_1_1_a_i_path}{A\+I\+Path}} for an illustrative image 

\mbox{\Hypertarget{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_acef40206cd82c494b7ef47641818077e}\label{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_acef40206cd82c494b7ef47641818077e}} 
\index{Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}!targetDirection@{targetDirection}}
\index{targetDirection@{targetDirection}!Pathfinding.Legacy.LegacyAIPath@{Pathfinding.Legacy.LegacyAIPath}}
\doxysubsubsection{\texorpdfstring{targetDirection}{targetDirection}}
{\footnotesize\ttfamily new Vector3 Pathfinding.\+Legacy.\+Legacy\+A\+I\+Path.\+target\+Direction\hspace{0.3cm}{\ttfamily [protected]}}



Relative direction to where the AI is heading. Filled in by \mbox{\hyperlink{class_pathfinding_1_1_legacy_1_1_legacy_a_i_path_ae7b2f72076ff318c342bcf6c62b95578}{Calculate\+Velocity}} 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Assets/\+Third Party Addons/\+Astar\+Pathfinding\+Project/\+Legacy/Legacy\+A\+I\+Path.\+cs\end{DoxyCompactItemize}
